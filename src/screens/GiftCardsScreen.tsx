import React, { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { Modal, useModal } from '../components';
import './screens.css';
import Slider from '../assets/slider.png';
import ProductImg from '../assets/product.png';

interface Brand {
  name: string;
  logo?: string;
}

/**
 * GiftCardsScreen Component
 * Browse and purchase gift cards
 */
const GiftCardsScreen: React.FC = () => {
  const navigate = useNavigate();
  const [searchQuery, setSearchQuery] = useState('');
  const { modalState, showModal, hideModal } = useModal();

  const balance = 1250.75;

  const featuredBrands: Brand[] = [
    { name: 'Adidas' },
    { name: 'Nike' },
    { name: 'Starbucks' },
    { name: 'Amazon' },
    { name: 'Walmart' },
    { name: 'Target' }
  ];

  const handleBack = () => {
    navigate(-1);
  };

  const handleMyGiftCards = () => {
    showModal({ title: 'My Gift Cards', message: 'My Gift Cards', type: 'info' });
  };

  const handleCategoryClick = (category: string) => {
    showModal({ title: 'Category Selected', message: `${category} category selected`, type: 'info' });
  };

  const handleBrandClick = (brand: string) => {
    showModal({ title: 'Brand Selected', message: `Selected: ${brand}`, type: 'info' });
  };

  return (
    <div className="gift-cards-screen">
      <div className="gift-cards-container">
        {/* Header */}
        <div className="gift-cards-header">
          <button className="back-btn" onClick={handleBack}>
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M11.369 4.22438C11.7618 3.90403 12.3408 3.92662 12.7069 4.29274C13.073 4.65885 13.0956 5.23786 12.7753 5.63063L12.7069 5.7068L6.41399 11.9998L12.7069 18.2928L12.7753 18.369C13.0956 18.7617 13.073 19.3407 12.7069 19.7068C12.3408 20.073 11.7618 20.0956 11.369 19.7752L11.2929 19.7068L4.29289 12.7068C3.90237 12.3163 3.90237 11.6833 4.29289 11.2928L11.2929 4.29274L11.369 4.22438Z" fill="#565E6D" />
              <path d="M19 11C19.5523 11 20 11.4477 20 12C20 12.5523 19.5523 13 19 13L5 13C4.44772 13 4 12.5523 4 12C4 11.4477 4.44772 11 5 11L19 11Z" fill="#565E6D" />
            </svg>
          </button>
          <h1 className="gift-cards-title">Gift Cards</h1>
          <button className="my-gift-cards-btn" onClick={handleMyGiftCards}>
            My Gift Cards
          </button>
        </div>

        <div className="gift-cards-content">
          {/* Current Balance */}
          <div className="balance-card">
            <div className="balance-meta">
              <span className="balance-label">Current Balance</span>
              <div className="balance-amount-row">
                <span className="balance-amount">${balance.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</span>
              </div>
            </div>
            <div className="wallet-icon">
              <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M21.0149 15.1752C20.7046 15.1752 20.4071 15.2985 20.1877 15.518C19.9682 15.7374 19.8449 16.0349 19.8449 16.3452L19.8507 16.4605C19.8772 16.7285 19.9956 16.9804 20.1877 17.1724C20.4071 17.3919 20.7046 17.5152 21.0149 17.5152H24.5249V15.1752H21.0149ZM5.80492 4.64518C5.49461 4.64518 5.19712 4.76853 4.9777 4.98795C4.75828 5.20737 4.63492 5.50487 4.63492 5.81518L4.64063 5.93057C4.66718 6.1985 4.78565 6.45036 4.9777 6.6424C5.19712 6.86182 5.49461 6.98518 5.80492 6.98518L21.0149 6.98518V4.64518L5.80492 4.64518ZM23.3549 6.98518C23.9755 6.98518 24.5706 7.23188 25.0094 7.67073C25.4482 8.10956 25.6949 8.70457 25.6949 9.32518L25.6949 13.1505C25.8702 13.2518 26.0338 13.3751 26.1794 13.5207C26.6182 13.9595 26.8649 14.5546 26.8649 15.1752V17.5152C26.8649 18.1357 26.6182 18.7308 26.1794 19.1697C25.7406 19.6084 25.1455 19.8552 24.5249 19.8552L21.0149 19.8552C20.084 19.8552 19.1915 19.4851 18.5332 18.8269C17.9574 18.251 17.6019 17.4959 17.522 16.6925L17.5049 16.3452C17.5049 15.4142 17.875 14.5217 18.5332 13.8635C19.1915 13.2052 20.084 12.8352 21.0149 12.8352H23.3549L23.3549 9.32518L5.80492 9.32518C4.87401 9.32518 3.9815 8.9551 3.32325 8.29685C2.74737 7.72099 2.39193 6.96588 2.31206 6.16252L2.29492 5.81518C2.29492 4.88427 2.66499 3.99175 3.32325 3.3335C3.9815 2.67525 4.87401 2.30518 5.80492 2.30518L21.0149 2.30518L21.2458 2.31661C21.7816 2.3697 22.2853 2.60663 22.6694 2.99073C23.1082 3.42956 23.3549 4.02457 23.3549 4.64518V6.98518Z" fill="#171A1F" />
                <path d="M2.2998 22.1901L2.2998 5.81014C2.2998 5.16397 2.82364 4.64014 3.4698 4.64014C4.11597 4.64014 4.6398 5.16397 4.6398 5.81014L4.6398 22.1901C4.6398 22.5004 4.76316 22.798 4.98258 23.0173C5.202 23.2368 5.4995 23.3601 5.8098 23.3601L23.3598 23.3601V18.6801C23.3598 18.0339 23.8836 17.5101 24.5298 17.5101C25.176 17.5101 25.6998 18.0339 25.6998 18.6801V23.3601C25.6998 23.9807 25.4531 24.5758 25.0143 25.0146C24.5754 25.4534 23.9804 25.7001 23.3598 25.7001L5.8098 25.7001C4.87889 25.7001 3.98638 25.3301 3.32813 24.6718C2.66988 24.0136 2.2998 23.121 2.2998 22.1901Z" fill="#171A1F" />
              </svg>
            </div>
          </div>

          {/* Special Offers */}
          <h3 className="section-title">Special Offers</h3>
          <div className="special-offers-carousel">
            <img src={Slider} alt="Slider" />
            <img src={Slider} alt="Slider" />
            <img src={Slider} alt="Slider" />
          </div>

          {/* Search */}
          <div className="gift-card-search">
            <div className="search-input-wrapper">
              <div className="search-icon">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M13.3025 13.3021C13.6064 12.9982 14.087 12.9795 14.413 13.2454L14.4762 13.3021L18.0783 16.9042L18.1359 16.9674C18.4015 17.2934 18.382 17.7741 18.0783 18.0778C17.7745 18.3816 17.2938 18.401 16.9678 18.1354L16.9046 18.0778L13.3025 14.4758L13.2458 14.4126C12.9799 14.0865 12.9987 13.606 13.3025 13.3021Z" fill="#171A1F" />
                  <path d="M14.9802 9.17C14.9802 5.96123 12.379 3.36 9.1702 3.36C5.96142 3.36 3.3602 5.96123 3.3602 9.17C3.3602 12.3788 5.96142 14.98 9.1702 14.98C12.379 14.98 14.9802 12.3788 14.9802 9.17ZM16.6402 9.17C16.6402 13.2956 13.2958 16.64 9.1702 16.64C5.04463 16.64 1.7002 13.2956 1.7002 9.17C1.7002 5.04443 5.04463 1.7 9.1702 1.7C13.2958 1.7 16.6402 5.04443 16.6402 9.17Z" fill="#171A1F" />
                </svg>
              </div>
              <input
                type="text"
                className="search-input"
                placeholder="Search gift cards or brands"
                value={searchQuery}
                onChange={(e) => setSearchQuery(e.target.value)}
              />
            </div>
          </div>

          {/* Shop by Category */}
          <h3 className="section-title">Shop by Category</h3>
          <div className="category-chips">
            <button className="category-chip" onClick={() => handleCategoryClick('Fashion & Retail')}>
              <div className="chip-icon"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0_1_1885)">
                  <path d="M11.3502 6.65985C11.3502 6.28982 11.6502 5.98985 12.0202 5.98985L13.4622 5.98985L13.4629 5.98658L13.8516 3.66186V3.66056L13.8588 3.60167C13.8696 3.46321 13.8372 3.32441 13.7652 3.20451C13.6829 3.06752 13.5544 2.96452 13.4028 2.914L11.2285 2.18839C11.0758 2.74309 10.7827 3.25444 10.3688 3.66841C9.74053 4.29662 8.88863 4.64982 8.00021 4.64985C7.11172 4.64985 6.25925 4.29666 5.631 3.66841C5.21709 3.25441 4.92324 2.7431 4.7706 2.18839L2.59702 2.91335C2.44552 2.9639 2.31681 3.06761 2.23454 3.20451C2.1626 3.32436 2.13014 3.46328 2.14098 3.60167L2.14818 3.66056L2.14883 3.66186L2.53683 5.98658L2.53748 5.98985L3.98021 5.98985C4.35017 5.98993 4.65021 6.28987 4.65021 6.65985L4.65021 13.3599C4.65021 13.7268 4.95324 14.0299 5.32021 14.0299L10.6802 14.0299C10.8578 14.0298 11.0283 13.9592 11.1539 13.8335C11.2795 13.7079 11.3502 13.5375 11.3502 13.3599L11.3502 6.65985ZM12.6902 13.3599C12.6902 13.8929 12.4782 14.404 12.1013 14.781C11.7244 15.1579 11.2133 15.3698 10.6802 15.3699L5.32021 15.3699C4.21318 15.3699 3.31021 14.4669 3.31021 13.3599L3.31021 7.32985H2.53945V7.32918C2.2213 7.32965 1.91317 7.21769 1.67054 7.01187C1.42816 6.80618 1.26802 6.52068 1.21646 6.20708L1.21515 6.20774L0.827153 3.88367L0.804902 3.7057C0.772501 3.29045 0.870221 2.87378 1.08626 2.51423C1.33319 2.10328 1.71886 1.79427 2.17369 1.6427L5.10822 0.664531L5.18542 0.643594C5.36774 0.60617 5.5592 0.645899 5.71213 0.756134C5.88678 0.882067 5.99021 1.08453 5.99021 1.29985C5.99021 1.83294 6.20213 2.34404 6.57908 2.72099C6.95601 3.09789 7.46715 3.30985 8.00021 3.30985C8.53326 3.30982 9.0444 3.0979 9.42134 2.72099C9.79822 2.34405 10.0102 1.8329 10.0102 1.29985L10.0148 1.22003C10.0369 1.03524 10.1354 0.866362 10.2883 0.756134C10.463 0.630248 10.6879 0.596435 10.8922 0.664531L13.8267 1.6427L13.9936 1.70682C14.3755 1.87314 14.6981 2.15465 14.9141 2.51423C15.161 2.92517 15.253 3.41096 15.1733 3.88367L14.7846 6.20381L14.7853 6.20446C14.7342 6.51917 14.5723 6.80558 14.3292 7.01187C14.0866 7.21769 13.7785 7.32972 13.4603 7.32918V7.32985H12.6902L12.6902 13.3599Z" fill="#565E6D" />
                </g>
                <defs>
                  <clipPath id="clip0_1_1885">
                    <rect width="16" height="16" fill="white" />
                  </clipPath>
                </defs>
              </svg>
              </div>
              Fashion & Retail
            </button>
            <button className="category-chip" onClick={() => handleCategoryClick('Food & Dining')}>
              <div className="chip-icon">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M1.31982 6.00453L1.31982 1.31453C1.31982 0.944504 1.6198 0.644531 1.98982 0.644531C2.35985 0.644531 2.65982 0.944504 2.65982 1.31453L2.65982 6.00453C2.65982 6.3715 2.96285 6.67453 3.32982 6.67453L6.00982 6.67453C6.18752 6.67453 6.35788 6.60389 6.48353 6.47824C6.60919 6.35259 6.67982 6.18223 6.67982 6.00453L6.67982 1.31453C6.67982 0.944504 6.97978 0.644531 7.34982 0.644531C7.71986 0.644531 8.01982 0.944504 8.01982 1.31453L8.01982 6.00453C8.01982 6.53762 7.8079 7.04873 7.43096 7.42567C7.05402 7.80261 6.54291 8.01453 6.00982 8.01453L3.32982 8.01453C2.2228 8.01453 1.31982 7.11157 1.31982 6.00453Z" fill="#565E6D" />
                  <path d="M4 14.6999L4 1.29988C4 0.929855 4.29997 0.629883 4.67 0.629883C5.04003 0.629883 5.34 0.929855 5.34 1.29988L5.34 14.6999C5.34 15.0699 5.04003 15.3699 4.67 15.3699C4.29997 15.3699 4 15.0699 4 14.6999Z" fill="#565E6D" />
                  <path d="M13.3349 14.6999L13.3349 10.6799H11.9949C10.8878 10.6799 9.98486 9.77692 9.98486 8.66988L9.98486 4.64988C9.98486 3.58371 10.4087 2.56151 11.1626 1.80762C11.9165 1.05372 12.9387 0.629883 14.0049 0.629883C14.1825 0.629883 14.3529 0.700521 14.4786 0.826173C14.6042 0.951824 14.6749 1.12219 14.6749 1.29988L14.6749 14.6999C14.6749 15.0699 14.3749 15.3699 14.0049 15.3699C13.6348 15.3699 13.3349 15.0699 13.3349 14.6999ZM11.3249 8.66988C11.3249 9.03684 11.6279 9.33988 11.9949 9.33988H13.3349L13.3349 2.0556C12.8753 2.1743 12.4514 2.41368 12.11 2.75504C11.6074 3.25764 11.3249 3.9391 11.3249 4.64988L11.3249 8.66988Z" fill="#565E6D" />
                </svg>
              </div>
              Food & Dining
            </button>
            <button className="category-chip" onClick={() => handleCategoryClick('Food & Dining')}>
              <div className="chip-icon">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M8.66973 2.66039C8.66973 2.48269 8.59911 2.31233 8.47342 2.18668C8.36347 2.07671 8.21922 2.00886 8.06579 1.99366L7.99973 1.99039C7.82204 1.99039 7.65166 2.06103 7.52604 2.18668C7.40034 2.31233 7.32973 2.48269 7.32973 2.66039C7.32973 3.03042 7.02977 3.33039 6.65973 3.33039C6.2897 3.33039 5.98973 3.03042 5.98973 2.66039C5.98973 2.48269 5.91909 2.31233 5.79344 2.18668C5.68346 2.07671 5.53924 2.00886 5.38581 1.99366L5.31973 1.99039C5.14203 1.99039 4.97167 2.06103 4.84602 2.18668C4.72036 2.31233 4.64973 2.48269 4.64973 2.66039C4.64973 3.03042 4.34975 3.33039 3.97973 3.33039C3.80203 3.33039 3.63167 3.40103 3.50602 3.52668C3.38036 3.65233 3.30973 3.82269 3.30973 4.00039L3.313 4.06647C3.3282 4.2199 3.39604 4.36413 3.50602 4.4741C3.61599 4.58407 3.76021 4.65192 3.91364 4.66712L3.97973 4.67039L4.04843 4.67366C4.3862 4.70805 4.64973 4.99355 4.64973 5.34039C4.64973 5.68724 4.3862 5.97273 4.04843 6.00712L3.97973 6.01039L3.78082 6.00058C3.32078 5.95484 2.88836 5.7513 2.5586 5.42152C2.22882 5.09175 2.02528 4.65934 1.97954 4.1993L1.96973 4.00039C1.96973 3.46731 2.18165 2.95621 2.5586 2.57926C2.79424 2.34361 3.0823 2.17257 3.39544 2.07741L3.39675 2.0761C3.49191 1.76296 3.66294 1.47491 3.8986 1.23926C4.27555 0.862312 4.78664 0.650391 5.31973 0.650391L5.51864 0.660206C5.94261 0.702356 6.34138 0.880502 6.65973 1.16598C7.02749 0.836188 7.50319 0.650391 7.99973 0.650391C8.49626 0.650391 8.97196 0.836188 9.33973 1.16598C9.70749 0.836188 10.1832 0.650391 10.6797 0.650391C11.2128 0.650391 11.7239 0.862312 12.1009 1.23926C12.3366 1.47506 12.5076 1.76338 12.6027 2.07676C12.9164 2.17183 13.2049 2.34326 13.4409 2.57926C13.8178 2.95621 14.0297 3.46731 14.0297 4.00039C14.0297 4.53348 13.8178 5.04457 13.4409 5.42152C13.0639 5.79847 12.5528 6.01039 12.0197 6.01039C11.6497 6.01039 11.3497 5.71042 11.3497 5.34039C11.3497 4.97036 11.6497 4.67039 12.0197 4.67039C12.1974 4.67039 12.3678 4.59975 12.4934 4.4741C12.6191 4.34845 12.6897 4.17809 12.6897 4.00039C12.6897 3.82269 12.6191 3.65233 12.4934 3.52668C12.3678 3.40103 12.1974 3.33039 12.0197 3.33039C11.6497 3.33039 11.3497 3.03042 11.3497 2.66039C11.3497 2.48269 11.2791 2.31233 11.1534 2.18668C11.0278 2.06103 10.8574 1.99039 10.6797 1.99039C10.502 1.99039 10.3317 2.06103 10.206 2.18668C10.0803 2.31233 10.0097 2.48269 10.0097 2.66039C10.0097 3.03042 9.70977 3.33039 9.33973 3.33039C8.96969 3.33039 8.66973 3.03042 8.66973 2.66039Z" fill="#565E6D" />
                  <path d="M5.94694 4.64236C6.29298 4.61764 6.59661 4.86001 6.65489 5.19459L6.66274 5.26263L7.33276 14.6426L7.33471 14.7114C7.32452 15.0507 7.05847 15.3337 6.71248 15.3584C6.36643 15.3832 6.0628 15.1408 6.00452 14.8062L5.99667 14.7382L5.32667 5.35816L5.32471 5.28946C5.3349 4.95008 5.60097 4.66709 5.94694 4.64236Z" fill="#565E6D" />
                  <path d="M10.0525 4.64236C10.4216 4.66875 10.6992 4.98908 10.6728 5.35816L10.0028 14.7382C9.97642 15.1073 9.6561 15.3848 9.287 15.3584C8.91796 15.332 8.64038 15.0117 8.66678 14.6426L9.33678 5.26263C9.36311 4.89357 9.6835 4.616 10.0525 4.64236Z" fill="#565E6D" />
                  <path d="M13.3598 4.64063C13.7072 4.64063 14.0494 4.78167 14.287 5.05872C14.4992 5.30629 14.5944 5.6228 14.5729 5.94987L14.5565 6.09054C14.5548 6.10117 14.5529 6.11208 14.5506 6.1226L12.8089 14.1626L12.8076 14.1619C12.7331 14.519 12.5077 14.8077 12.2815 14.9962C12.0545 15.1854 11.7232 15.3606 11.3498 15.3606L4.64984 15.3606C3.94683 15.3606 3.32718 14.8853 3.19141 14.1619L3.19075 14.1626L1.44901 6.1226L1.44313 6.09054C1.38052 5.71461 1.47017 5.34167 1.7127 5.05872C1.95029 4.78167 2.29244 4.64062 2.63984 4.64063L13.3598 4.64063ZM4.50065 13.8787L4.50654 13.9107C4.5135 13.9522 4.53115 13.975 4.54842 13.9892C4.56711 14.0045 4.59947 14.0206 4.64984 14.0206L11.3335 14.0206C11.336 14.0198 11.3399 14.0187 11.3446 14.0167C11.365 14.0079 11.3933 13.9912 11.4231 13.9663C11.4531 13.9414 11.4761 13.9156 11.4899 13.895C11.495 13.8873 11.497 13.8815 11.4984 13.8787L13.21 5.98063L2.78967 5.98063L4.50065 13.8787Z" fill="#565E6D" />
                </svg>
              </div>
              Entertainment
            </button>
          </div>

          {/* Featured Brands */}
          <h3 className="section-title">Featured Brands</h3>
          <div className="brands-grid">
            {featuredBrands.map(brand => (
              <button
                key={brand.name}
                className="brand-card"
                onClick={() => handleBrandClick(brand.name)}
              >
                <div className="brand-logo">
                  <img src={ProductImg} />
                </div>
                <span className="brand-name">{brand.name}</span>
              </button>
            ))}
          </div>
        </div>
      </div>

      <Modal
        isOpen={modalState.isOpen}
        onClose={hideModal}
        title={modalState.title}
        message={modalState.message}
        type={modalState.type}
      />
    </div>
  );
};

export default GiftCardsScreen;
