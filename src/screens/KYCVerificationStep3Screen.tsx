import React, { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { ScreenType } from '../types';
import './screens.css';

/**
 * KYCVerificationStep3Screen Component
 * Step 3-5: Address verification with document upload
 */
const KYCVerificationStep3Screen: React.FC = () => {
  const navigate = useNavigate();
  const [documentUploaded, setDocumentUploaded] = useState(false);
  const [verificationStatus, setVerificationStatus] = useState<'idle' | 'progress' | 'complete'>('idle');

  const handleBack = () => {
    navigate(-1);
  };

  const handleUpload = () => {
    setDocumentUploaded(true);
    setVerificationStatus('progress');
    alert('Document uploaded. Verification in progress...');

    // Simulate verification process
    setTimeout(() => {
      setVerificationStatus('complete');
    }, 2000);
  };

  const handleResubmit = () => {
    navigate(`/${ScreenType.DASHBOARD}`);
  };

  return (
    <div className="kyc-verification-screen">
      <div className="kyc-verification-container">
        {/* Header */}
        <div className="kyc-header-with-icon">
          <div className="kyc-header-center">
            {
              verificationStatus === 'complete' ?
                <button className="back-btn" onClick={handleBack}>
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M11.369 4.22462C11.7618 3.90427 12.3408 3.92686 12.7069 4.29298C13.073 4.65909 13.0956 5.2381 12.7753 5.63087L12.7069 5.70704L6.41399 12L12.7069 18.293L12.7753 18.3692C13.0956 18.7619 13.073 19.3409 12.7069 19.707C12.3408 20.0732 11.7618 20.0958 11.369 19.7754L11.2929 19.707L4.29289 12.707C3.90237 12.3165 3.90237 11.6835 4.29289 11.293L11.2929 4.29298L11.369 4.22462Z" fill="#565E6D" />
                    <path d="M19 11C19.5523 11 20 11.4477 20 12C20 12.5523 19.5523 13 19 13L5 13C4.44772 13 4 12.5523 4 12C4 11.4477 4.44772 11 5 11L19 11Z" fill="#565E6D" />
                  </svg>
                </button>
                :
                <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <rect width="28" height="28" fill="#F8F9FA" />
                  <rect width="28" height="28" stroke="black" />
                  <path d="M19.25 9.49963C17.5104 9.49963 15.478 8.49719 14.0828 7.27966C14.0597 7.25994 14.0304 7.24963 14 7.24963C13.9696 7.24963 13.9403 7.26067 13.9172 7.2804L13.9165 7.27966C12.5728 8.45115 10.617 9.43627 8.91406 9.4967L8.75 9.49963L8.75 14.7497L8.75659 15.0587C8.82336 16.5778 9.38488 17.7038 10.2397 18.5795C11.0555 19.415 12.1648 20.048 13.4404 20.5424L13.9971 20.746L14.014 20.7511C15.5177 20.2263 16.8296 19.5357 17.7603 18.5809C18.6718 17.6457 19.25 16.4265 19.25 14.7497V9.49963ZM20.75 14.7497C20.75 16.8227 20.0157 18.4166 18.8347 19.6283C17.6741 20.819 16.1153 21.6081 14.5017 22.1705L14.4958 22.1727C14.1748 22.2815 13.8266 22.2776 13.5078 22.1632C13.5034 22.1617 13.4991 22.1603 13.4946 22.1588C13.4934 22.1584 13.4921 22.1585 13.491 22.1581V22.1573C11.879 21.599 10.3247 20.8135 9.16674 19.6276C8.05836 18.4923 7.34388 17.0209 7.25879 15.1334L7.25 14.7497L7.25 9.49963C7.25009 9.10193 7.40823 8.72031 7.68945 8.43909C7.97074 8.15789 8.35225 7.99963 8.75 7.99963L8.99097 7.99084C10.2189 7.90045 11.7901 7.14656 12.9365 6.14514L12.9431 6.14002L13.0567 6.05066C13.3312 5.85542 13.6608 5.74963 14 5.74963C14.3392 5.74963 14.6688 5.85542 14.9433 6.05066L15.0569 6.14002L15.0635 6.14514L15.2993 6.34363C16.5037 7.31507 18.0708 7.99963 19.25 7.99963C19.6477 7.99963 20.0293 8.15789 20.3106 8.43909C20.5918 8.72032 20.7499 9.10193 20.75 9.49963V14.7497Z" fill="#171A1F" />
                </svg>
            }
            <h1 className="kyc-title-inline">Address Verification</h1>
            <span className={`kyc-step-inline-small ${verificationStatus === 'complete' ? 'visibility' : ''}`}>Step 3-5</span>
          </div>
        </div>

        {/* Upload Section */}
        <div className="kyc-form">
          <h3 className="section-title">Proof of Address</h3>

          {!documentUploaded ? (
            <button className="upload-box-large" onClick={handleUpload}>
              <div className="upload-icon-large">
                <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M14.6699 27.99L14.6699 17.35C14.6699 16.6155 15.2654 16.02 15.9999 16.02C16.7345 16.02 17.3299 16.6155 17.3299 17.35L17.3299 27.99C17.3299 28.7246 16.7345 29.32 15.9999 29.32C15.2654 29.32 14.6699 28.7246 14.6699 27.99Z" fill="#171A1F" />
                  <path d="M11.1716 2.73277C12.7811 2.60513 14.3992 2.84542 15.902 3.43543C17.4046 4.02548 18.7539 4.94988 19.8465 6.1383C20.711 7.07868 21.3938 8.16628 21.8714 9.3451H23.3144L23.608 9.35161C25.0738 9.41023 26.4913 9.90765 27.6733 10.7842C28.9337 11.7189 29.8594 13.0349 30.315 14.5365C30.7707 16.0385 30.7309 17.6475 30.2021 19.1253C29.6732 20.6029 28.6835 21.872 27.3784 22.7438L27.2615 22.8127C26.666 23.1286 25.9166 22.9488 25.5341 22.3762C25.126 21.7655 25.2908 20.94 25.9017 20.5319L26.2029 20.3111C26.8844 19.7722 27.4035 19.0517 27.698 18.2291C28.0345 17.2888 28.0605 16.265 27.7706 15.3093C27.4808 14.3535 26.8909 13.5158 26.0887 12.9208C25.3868 12.4003 24.5544 12.0903 23.6884 12.0207L23.3144 12.0051H20.9336C20.3459 12.0049 19.8277 11.6189 19.6595 11.0557C19.3131 9.89563 18.7072 8.82974 17.8879 7.93848C17.0684 7.04708 16.0562 6.35352 14.9292 5.911C13.8021 5.46861 12.589 5.28796 11.3821 5.38368C10.1751 5.47946 9.00543 5.84841 7.96224 6.46301C6.91897 7.07765 6.02946 7.92266 5.36069 8.93209C4.6921 9.94137 4.26133 11.0894 4.10213 12.2896C3.94291 13.49 4.05991 14.7112 4.44242 15.86C4.82493 17.0087 5.46324 18.0561 6.31013 18.9214C6.82373 19.4464 6.8155 20.2884 6.29064 20.802C5.76579 21.3158 4.92376 21.306 4.40994 20.7813L3.99952 20.3371C3.07296 19.2761 2.36375 18.0407 1.9175 16.7003C1.40749 15.1685 1.25325 13.5406 1.4655 11.9402C1.67776 10.3398 2.25202 8.80894 3.14358 7.46311C4.03528 6.11719 5.22174 4.9914 6.61276 4.17188C8.00359 3.35251 9.56247 2.86048 11.1716 2.73277Z" fill="#171A1F" />
                  <path d="M15.1609 16.3087C15.6833 15.8827 16.4534 15.9128 16.9403 16.3997L22.2603 21.7197L22.3513 21.8211C22.7773 22.3433 22.7472 23.1134 22.2603 23.6003C21.7734 24.0874 21.0033 24.1174 20.4809 23.6913L20.3797 23.6003L16 19.2208L11.6204 23.6003C11.1009 24.1198 10.259 24.1198 9.73964 23.6003C9.22025 23.081 9.22025 22.2391 9.73964 21.7197L15.0597 16.3997L15.1609 16.3087Z" fill="#171A1F" />
                </svg>
              </div>
              <p className="upload-text-large">
                Drag & drop your document here, or<br />click to upload
              </p>
              <p className="upload-format">PDF, JPG, PNG (Max 5MB)</p>
            </button>
          ) : (
            <div className="upload-box-large uploaded">
              <span className="upload-icon-large">✓</span>
              <p className="upload-text-large">Document uploaded</p>
            </div>
          )}

          {/* Accepted Documents */}
          <div className="accepted-documents">
            <h4 className="accepted-title">Accepted Documents:</h4>
            <ul className="accepted-list">
              <li>
                <div className="bullet-icon">
                  <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8.00052 2.64038C9.55948 2.64044 11.0835 3.10345 12.379 3.97057C13.5936 4.7835 14.5564 5.9173 15.1617 7.24334L15.2783 7.51161L15.2868 7.53385C15.3845 7.7971 15.3967 8.08339 15.3234 8.35239L15.2868 8.46623C15.284 8.47366 15.2813 8.48117 15.2783 8.48847C14.6838 9.92977 13.6747 11.1624 12.379 12.0296C11.1645 12.8425 9.74902 13.2997 8.2923 13.3538L8.00052 13.3597C6.44141 13.3597 4.91697 12.8967 3.62129 12.0296C2.40656 11.2165 1.44394 10.0823 0.838568 8.75607L0.722102 8.48847C0.719081 8.48117 0.716354 8.47366 0.713593 8.46623C0.601961 8.16546 0.601998 7.83468 0.713593 7.53385L0.722102 7.51161C1.31651 6.07035 2.32569 4.83774 3.62129 3.97057C4.91697 3.10339 6.44141 2.64038 8.00052 2.64038ZM8.00052 3.98038C6.70682 3.98038 5.44167 4.36461 4.36653 5.08418C3.29826 5.79922 2.46491 6.81347 1.9705 7.9997C2.46491 9.18614 3.2981 10.2008 4.36653 10.9159C5.44167 11.6355 6.70682 12.0197 8.00052 12.0197L8.24259 12.0151C9.45134 11.9703 10.6259 11.5905 11.6338 10.9159C12.7022 10.2009 13.5348 9.18607 14.0292 7.9997C13.5348 6.8136 12.702 5.79917 11.6338 5.08418C10.5588 4.36467 9.29409 3.98044 8.00052 3.98038Z" fill="#171A1F" />
                    <path d="M9.34031 8.00007C9.34031 7.25999 8.74039 6.66007 8.00031 6.66007C7.26023 6.66007 6.66031 7.25999 6.66031 8.00007C6.66031 8.74015 7.26023 9.34007 8.00031 9.34007C8.74039 9.34007 9.34031 8.74015 9.34031 8.00007ZM10.6803 8.00007C10.6803 9.48017 9.48041 10.6801 8.00031 10.6801C6.52019 10.6801 5.32031 9.48017 5.32031 8.00007C5.32031 6.51994 6.52019 5.32007 8.00031 5.32007C9.48041 5.32007 10.6803 6.51994 10.6803 8.00007Z" fill="#171A1F" />
                  </svg>
                </div>
                Utility bill (electricity, water, gas, internet)
              </li>
              <li>
                <div className="bullet-icon">
                  <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8.00052 2.64038C9.55948 2.64044 11.0835 3.10345 12.379 3.97057C13.5936 4.7835 14.5564 5.9173 15.1617 7.24334L15.2783 7.51161L15.2868 7.53385C15.3845 7.7971 15.3967 8.08339 15.3234 8.35239L15.2868 8.46623C15.284 8.47366 15.2813 8.48117 15.2783 8.48847C14.6838 9.92977 13.6747 11.1624 12.379 12.0296C11.1645 12.8425 9.74902 13.2997 8.2923 13.3538L8.00052 13.3597C6.44141 13.3597 4.91697 12.8967 3.62129 12.0296C2.40656 11.2165 1.44394 10.0823 0.838568 8.75607L0.722102 8.48847C0.719081 8.48117 0.716354 8.47366 0.713593 8.46623C0.601961 8.16546 0.601998 7.83468 0.713593 7.53385L0.722102 7.51161C1.31651 6.07035 2.32569 4.83774 3.62129 3.97057C4.91697 3.10339 6.44141 2.64038 8.00052 2.64038ZM8.00052 3.98038C6.70682 3.98038 5.44167 4.36461 4.36653 5.08418C3.29826 5.79922 2.46491 6.81347 1.9705 7.9997C2.46491 9.18614 3.2981 10.2008 4.36653 10.9159C5.44167 11.6355 6.70682 12.0197 8.00052 12.0197L8.24259 12.0151C9.45134 11.9703 10.6259 11.5905 11.6338 10.9159C12.7022 10.2009 13.5348 9.18607 14.0292 7.9997C13.5348 6.8136 12.702 5.79917 11.6338 5.08418C10.5588 4.36467 9.29409 3.98044 8.00052 3.98038Z" fill="#171A1F" />
                    <path d="M9.34031 8.00007C9.34031 7.25999 8.74039 6.66007 8.00031 6.66007C7.26023 6.66007 6.66031 7.25999 6.66031 8.00007C6.66031 8.74015 7.26023 9.34007 8.00031 9.34007C8.74039 9.34007 9.34031 8.74015 9.34031 8.00007ZM10.6803 8.00007C10.6803 9.48017 9.48041 10.6801 8.00031 10.6801C6.52019 10.6801 5.32031 9.48017 5.32031 8.00007C5.32031 6.51994 6.52019 5.32007 8.00031 5.32007C9.48041 5.32007 10.6803 6.51994 10.6803 8.00007Z" fill="#171A1F" />
                  </svg>
                </div>
                Bank statement or credit card statement
              </li>
              <li>
                <div className="bullet-icon">
                  <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8.00052 2.64038C9.55948 2.64044 11.0835 3.10345 12.379 3.97057C13.5936 4.7835 14.5564 5.9173 15.1617 7.24334L15.2783 7.51161L15.2868 7.53385C15.3845 7.7971 15.3967 8.08339 15.3234 8.35239L15.2868 8.46623C15.284 8.47366 15.2813 8.48117 15.2783 8.48847C14.6838 9.92977 13.6747 11.1624 12.379 12.0296C11.1645 12.8425 9.74902 13.2997 8.2923 13.3538L8.00052 13.3597C6.44141 13.3597 4.91697 12.8967 3.62129 12.0296C2.40656 11.2165 1.44394 10.0823 0.838568 8.75607L0.722102 8.48847C0.719081 8.48117 0.716354 8.47366 0.713593 8.46623C0.601961 8.16546 0.601998 7.83468 0.713593 7.53385L0.722102 7.51161C1.31651 6.07035 2.32569 4.83774 3.62129 3.97057C4.91697 3.10339 6.44141 2.64038 8.00052 2.64038ZM8.00052 3.98038C6.70682 3.98038 5.44167 4.36461 4.36653 5.08418C3.29826 5.79922 2.46491 6.81347 1.9705 7.9997C2.46491 9.18614 3.2981 10.2008 4.36653 10.9159C5.44167 11.6355 6.70682 12.0197 8.00052 12.0197L8.24259 12.0151C9.45134 11.9703 10.6259 11.5905 11.6338 10.9159C12.7022 10.2009 13.5348 9.18607 14.0292 7.9997C13.5348 6.8136 12.702 5.79917 11.6338 5.08418C10.5588 4.36467 9.29409 3.98044 8.00052 3.98038Z" fill="#171A1F" />
                    <path d="M9.34031 8.00007C9.34031 7.25999 8.74039 6.66007 8.00031 6.66007C7.26023 6.66007 6.66031 7.25999 6.66031 8.00007C6.66031 8.74015 7.26023 9.34007 8.00031 9.34007C8.74039 9.34007 9.34031 8.74015 9.34031 8.00007ZM10.6803 8.00007C10.6803 9.48017 9.48041 10.6801 8.00031 10.6801C6.52019 10.6801 5.32031 9.48017 5.32031 8.00007C5.32031 6.51994 6.52019 5.32007 8.00031 5.32007C9.48041 5.32007 10.6803 6.51994 10.6803 8.00007Z" fill="#171A1F" />
                  </svg>
                </div>
                Government-issued correspondence (tax, social security)
              </li>
              <li>
                <div className="bullet-icon">
                  <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8.00052 2.64038C9.55948 2.64044 11.0835 3.10345 12.379 3.97057C13.5936 4.7835 14.5564 5.9173 15.1617 7.24334L15.2783 7.51161L15.2868 7.53385C15.3845 7.7971 15.3967 8.08339 15.3234 8.35239L15.2868 8.46623C15.284 8.47366 15.2813 8.48117 15.2783 8.48847C14.6838 9.92977 13.6747 11.1624 12.379 12.0296C11.1645 12.8425 9.74902 13.2997 8.2923 13.3538L8.00052 13.3597C6.44141 13.3597 4.91697 12.8967 3.62129 12.0296C2.40656 11.2165 1.44394 10.0823 0.838568 8.75607L0.722102 8.48847C0.719081 8.48117 0.716354 8.47366 0.713593 8.46623C0.601961 8.16546 0.601998 7.83468 0.713593 7.53385L0.722102 7.51161C1.31651 6.07035 2.32569 4.83774 3.62129 3.97057C4.91697 3.10339 6.44141 2.64038 8.00052 2.64038ZM8.00052 3.98038C6.70682 3.98038 5.44167 4.36461 4.36653 5.08418C3.29826 5.79922 2.46491 6.81347 1.9705 7.9997C2.46491 9.18614 3.2981 10.2008 4.36653 10.9159C5.44167 11.6355 6.70682 12.0197 8.00052 12.0197L8.24259 12.0151C9.45134 11.9703 10.6259 11.5905 11.6338 10.9159C12.7022 10.2009 13.5348 9.18607 14.0292 7.9997C13.5348 6.8136 12.702 5.79917 11.6338 5.08418C10.5588 4.36467 9.29409 3.98044 8.00052 3.98038Z" fill="#171A1F" />
                    <path d="M9.34031 8.00007C9.34031 7.25999 8.74039 6.66007 8.00031 6.66007C7.26023 6.66007 6.66031 7.25999 6.66031 8.00007C6.66031 8.74015 7.26023 9.34007 8.00031 9.34007C8.74039 9.34007 9.34031 8.74015 9.34031 8.00007ZM10.6803 8.00007C10.6803 9.48017 9.48041 10.6801 8.00031 10.6801C6.52019 10.6801 5.32031 9.48017 5.32031 8.00007C5.32031 6.51994 6.52019 5.32007 8.00031 5.32007C9.48041 5.32007 10.6803 6.51994 10.6803 8.00007Z" fill="#171A1F" />
                  </svg>
                </div>
                Rental agreement or mortgage statement
              </li>
            </ul>
          </div>

          {/* Verification Status */}
          {verificationStatus === 'progress' && (
            <div className="verification-status">
              <span className="status-icon spinning">⟳</span>
              <span className="status-text">Verification in progress.</span>
            </div>
          )}

          {verificationStatus === 'complete' && (
            <div className="verification-status complete">
              <span className="status-icon">✓</span>
              <span className="status-text">Verification complete!</span>
            </div>
          )}
        </div>

        {/* Resubmit Button */}
        <button className="kyc-continue-btn" onClick={handleResubmit}>
          Resubmit
        </button>
      </div>
    </div>
  );
};

export default KYCVerificationStep3Screen;
