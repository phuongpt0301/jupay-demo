import React from 'react';
import { useNavigate } from 'react-router-dom';
import { useAppContext, selectors, appActions } from '../context';
import { ScreenType } from '../types';
import './screens.css';

/**
 * MenuScreen Component
 * Main menu with profile and settings navigation
 */
const MenuScreen: React.FC = () => {
  const navigate = useNavigate();
  const { state, dispatch } = useAppContext();
  const user = selectors.getCurrentUser(state);

  const handleProfileInfo = () => {
    navigate(`/${ScreenType.PROFILE_INFO}`);
  };

  const handlePaymentMethods = () => {
    navigate(`/${ScreenType.PAYMENT_METHODS}`);
  };

  const handleNotifications = () => {
    navigate(`/${ScreenType.NOTIFICATIONS}`);
  };

  const handleSecurity = () => {
    navigate(`/${ScreenType.SECURITY_SETTINGS}`);
  };

  const handleHelpSupport = () => {
    navigate(`/${ScreenType.HELP_CENTER}`);
  };

  const handleLogout = () => {
    if (confirm('Are you sure you want to log out?')) {
      dispatch(appActions.clearUser());
      navigate(`/${ScreenType.LOGIN}`, { replace: true });
    }
  };

  const handleClose = () => {
    navigate(-1);
  };

  return (
    <div className="screen menu-screen">
      <div className="menu-container">
        {/* Header */}
        <div className="menu-header">
          <h1 className="menu-title">Menu</h1>
          <button className="menu-close-btn" onClick={handleClose}>✕</button>
        </div>

        {/* Profile Card */}
        <div className="menu-profile-card">
          <div className="menu-avatar">
            <svg width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect width="56" height="56" rx="28" fill="#9095A0" />
              <path d="M30.1 30.7998H25.9C22.4203 30.7998 19.6 33.6201 19.6 37.0998C19.6 37.0998 22.75 38.4998 28 38.4998C33.25 38.4998 36.4 37.0998 36.4 37.0998C36.4 33.6201 33.5797 30.7998 30.1 30.7998Z" stroke="white" stroke-width="1.68" stroke-miterlimit="10" stroke-linecap="square" />
              <path d="M23.1 22.4C23.1 19.6938 25.2938 17.5 28 17.5C30.7062 17.5 32.9 19.6938 32.9 22.4C32.9 25.1062 30.7062 28 28 28C25.2938 28 23.1 25.1062 23.1 22.4Z" stroke="white" stroke-width="1.68" stroke-miterlimit="10" stroke-linecap="square" />
            </svg>
          </div>
          <div className="menu-profile-info">
            <span className="menu-profile-name">{user?.displayName || 'Jason Siyam'}</span>
            <span className="menu-profile-phone">+65 9123 4567</span>
          </div>
          <button className="menu-edit-btn" onClick={handleProfileInfo}>EDIT</button>
        </div>

        {/* Menu Items */}
        <div className="menu-items">
          <button className="menu-item" onClick={handleProfileInfo}>
            <div className="menu-item-icon">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M14.98 17.4902V15.8302C14.98 15.1698 14.7175 14.5366 14.2505 14.0697C13.842 13.6611 13.3063 13.409 12.7364 13.3523L12.49 13.3402H7.51C6.84961 13.3402 6.21646 13.6027 5.7495 14.0697C5.28253 14.5366 5.02 15.1698 5.02 15.8302L5.02 17.4902C5.02 17.9486 4.64839 18.3202 4.19 18.3202C3.73161 18.3202 3.36 17.9486 3.36 17.4902L3.36 15.8302C3.36 14.7295 3.79754 13.6743 4.57582 12.896C5.3541 12.1178 6.40935 11.6802 7.51 11.6802H12.49L12.6958 11.6851C13.7216 11.736 14.6946 12.1664 15.4242 12.896C16.2024 13.6743 16.64 14.7295 16.64 15.8302V17.4902C16.64 17.9486 16.2684 18.3202 15.81 18.3202C15.3516 18.3202 14.98 17.9486 14.98 17.4902Z" fill="#171A1F" />
                <path d="M12.49 5.83018C12.49 4.45499 11.3752 3.34018 10 3.34018C8.62477 3.34018 7.51 4.45499 7.51 5.83018C7.51 7.20536 8.62477 8.32018 10 8.32018C11.3752 8.32018 12.49 7.20536 12.49 5.83018ZM14.15 5.83018C14.15 8.12215 12.292 9.98018 10 9.98018C7.70802 9.98018 5.85 8.12215 5.85 5.83018C5.85 3.5382 7.70802 1.68018 10 1.68018C12.292 1.68018 14.15 3.5382 14.15 5.83018Z" fill="#171A1F" />
              </svg>
            </div>
            <div className="menu-item-info">
              <span className="menu-item-title">Profile Information</span>
              <span className="menu-item-subtitle">Edit details</span>
            </div>
            <div className="arrow-icon">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M6.92315 4.4334C7.22703 4.12952 7.7076 4.11077 8.0336 4.37666L8.09683 4.4334L13.0768 9.41342C13.4009 9.73753 13.4009 10.2629 13.0768 10.587L8.09683 15.567C7.77269 15.8912 7.24729 15.8912 6.92315 15.567C6.59902 15.2429 6.59902 14.7175 6.92315 14.3934L11.3163 10.0002L6.92315 5.60707L6.86641 5.54385C6.60052 5.21785 6.61928 4.73727 6.92315 4.4334Z" fill="#171A1F" />
              </svg>
            </div>
          </button>

          <button className="menu-item" onClick={handlePaymentMethods}>
            <div className="menu-item-icon">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M17.47 5.84986C17.47 5.39147 17.0984 5.01986 16.64 5.01986L3.36 5.01986C2.90161 5.01986 2.53 5.39147 2.53 5.84986L2.53 14.1499C2.53 14.6083 2.90161 14.9799 3.36 14.9799L16.64 14.9799C17.0984 14.9799 17.47 14.6083 17.47 14.1499L17.47 5.84986ZM19.13 14.1499C19.13 15.5251 18.0152 16.6399 16.64 16.6399L3.36 16.6399C1.98481 16.6399 0.869999 15.5251 0.869999 14.1499L0.869999 5.84986C0.869999 4.47468 1.98481 3.35986 3.36 3.35986L16.64 3.35986C18.0152 3.35986 19.13 4.47468 19.13 5.84986L19.13 14.1499Z" fill="#171A1F" />
                <path d="M18.3 7.5C18.7584 7.5 19.13 7.87161 19.13 8.33C19.13 8.78841 18.7584 9.16 18.3 9.16L1.7 9.16C1.24161 9.16 0.869999 8.78841 0.869999 8.33C0.869999 7.87161 1.24161 7.5 1.7 7.5L18.3 7.5Z" fill="#171A1F" />
              </svg>
            </div>
            <div className="menu-item-info">
              <span className="menu-item-title">Payment Methods</span>
              <span className="menu-item-subtitle">Manage cards</span>
            </div>
            <div className="arrow-icon">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M6.92315 4.4334C7.22703 4.12952 7.7076 4.11077 8.0336 4.37666L8.09683 4.4334L13.0768 9.41342C13.4009 9.73753 13.4009 10.2629 13.0768 10.587L8.09683 15.567C7.77269 15.8912 7.24729 15.8912 6.92315 15.567C6.59902 15.2429 6.59902 14.7175 6.92315 14.3934L11.3163 10.0002L6.92315 5.60707L6.86641 5.54385C6.60052 5.21785 6.61928 4.73727 6.92315 4.4334Z" fill="#171A1F" />
              </svg>
            </div>
          </button>

          <button className="menu-item" onClick={handleNotifications}>
            <div className="menu-item-icon">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M10.7647 17.0187C11.0107 16.6774 11.4802 16.5713 11.8524 16.7861C12.2246 17.001 12.3678 17.4609 12.1953 17.8447L12.1564 17.92C11.9379 18.2984 11.6236 18.6126 11.2453 18.8311C10.8669 19.0496 10.4372 19.1649 10.0003 19.165C9.56334 19.165 9.13381 19.0496 8.75533 18.8311C8.42408 18.6399 8.14196 18.3754 7.9302 18.0586L7.84347 17.92L7.80456 17.8447C7.63205 17.4609 7.77525 17.001 8.14742 16.7861C8.51961 16.5713 8.98914 16.6774 9.23516 17.0187L9.28139 17.09L9.3414 17.1808C9.40746 17.2669 9.49071 17.3394 9.58533 17.394C9.71141 17.4667 9.85475 17.505 10.0003 17.505C10.1459 17.5049 10.2893 17.4668 10.4153 17.394C10.5414 17.3212 10.6457 17.2161 10.7184 17.09L10.7647 17.0187Z" fill="#171A1F" />
                <path d="M14.1498 6.67523C14.1498 5.57473 13.7129 4.5193 12.9348 3.74105C12.1565 2.96278 11.1005 2.52523 9.99983 2.52523C8.89925 2.52529 7.84386 2.96283 7.06563 3.74105C6.28742 4.51932 5.84982 5.57464 5.84982 6.67523L5.84657 7.03511C5.81104 8.79879 5.5125 10.0595 5.04737 11.0441C4.55729 12.0815 3.90694 12.7512 3.36062 13.3152L16.6398 13.3152C16.0924 12.7509 15.4429 12.0809 14.9531 11.0441C14.4568 9.99357 14.1498 8.62914 14.1498 6.67523ZM15.8098 6.67523C15.8098 8.45534 16.0886 9.56272 16.4534 10.3349C16.7276 10.9154 17.0656 11.3417 17.4503 11.759L17.85 12.1789L17.8678 12.1983C18.0843 12.4363 18.2272 12.7318 18.2787 13.0494C18.3302 13.3668 18.2888 13.6923 18.1588 13.9864C18.0287 14.2804 17.8155 14.5307 17.546 14.7061C17.3101 14.8597 17.0393 14.951 16.7598 14.9712L16.6398 14.9752L3.35982 14.9752C3.03809 14.975 2.72306 14.8811 2.45362 14.7053C2.18417 14.5295 1.97145 14.2791 1.84166 13.9847C1.71191 13.6904 1.67056 13.3645 1.72251 13.047C1.77448 12.7296 1.91756 12.4343 2.13426 12.1966L2.15129 12.1781L2.55089 11.759C2.93503 11.3419 3.27202 10.9154 3.54624 10.3349C3.88819 9.61094 4.1546 8.59245 4.18657 7.00108L4.18982 6.67523C4.18982 5.13432 4.80237 3.65616 5.89196 2.56657C6.98147 1.47723 8.4591 0.865292 9.99983 0.865234C11.5406 0.865234 13.0189 1.47705 14.1085 2.56657C15.198 3.65616 15.8098 5.13432 15.8098 6.67523Z" fill="#171A1F" />
              </svg>
            </div>
            <div className="menu-item-info">
              <span className="menu-item-title">Notifications</span>
              <span className="menu-item-subtitle">Preferences</span>
            </div>
            <div className="arrow-icon">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M6.92315 4.4334C7.22703 4.12952 7.7076 4.11077 8.0336 4.37666L8.09683 4.4334L13.0768 9.41342C13.4009 9.73753 13.4009 10.2629 13.0768 10.587L8.09683 15.567C7.77269 15.8912 7.24729 15.8912 6.92315 15.567C6.59902 15.2429 6.59902 14.7175 6.92315 14.3934L11.3163 10.0002L6.92315 5.60707L6.86641 5.54385C6.60052 5.21785 6.61928 4.73727 6.92315 4.4334Z" fill="#171A1F" />
              </svg>
            </div>
          </button>

          <button className="menu-item" onClick={handleSecurity}>
            <div className="menu-item-icon">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M15.81 5.01963C13.8848 5.01963 11.6356 3.91026 10.0916 2.56286C10.0661 2.54103 10.0336 2.52963 10 2.52963C9.96638 2.52963 9.93393 2.54184 9.90837 2.56367L9.90762 2.56286C8.42059 3.8593 6.25613 4.9495 4.37156 5.01639L4.19 5.01963L4.19 10.8297L4.19729 11.1717C4.27119 12.8528 4.89259 14.0989 5.83865 15.068C6.74145 15.9926 7.96903 16.6932 9.38074 17.2402L9.99676 17.4656L10.0154 17.4712C11.6796 16.8905 13.1314 16.1263 14.1614 15.0696C15.1701 14.0347 15.81 12.6854 15.81 10.8297V5.01963ZM17.47 10.8297C17.47 13.1239 16.6574 14.8878 15.3504 16.2287C14.066 17.5464 12.3409 18.4197 10.5552 19.0421L10.5487 19.0445C10.1934 19.1649 9.8081 19.1606 9.45535 19.034C9.45046 19.0323 9.44564 19.0308 9.44074 19.0291C9.43942 19.0286 9.43792 19.0288 9.43668 19.0283V19.0275C7.65279 18.4095 5.93263 17.5403 4.6512 16.2279C3.42459 14.9716 2.63389 13.3431 2.53973 11.2544L2.53 10.8297L2.53 5.01963C2.5301 4.5795 2.7051 4.15718 3.01633 3.84596C3.32762 3.53476 3.74982 3.35963 4.19 3.35963L4.45667 3.3499C5.81553 3.24987 7.55443 2.41557 8.82306 1.30733L8.83036 1.30165L8.95602 1.20276C9.2598 0.986698 9.62459 0.869629 10 0.869629C10.3754 0.869629 10.7402 0.986698 11.044 1.20276L11.1696 1.30165L11.1769 1.30733L11.4379 1.52698C12.7708 2.60205 14.505 3.35963 15.81 3.35963C16.2501 3.35963 16.6724 3.53476 16.9837 3.84596C17.2949 4.15718 17.4699 4.5795 17.47 5.01963V10.8297Z" fill="#171A1F" />
                <path d="M11.9664 7.69649C12.2924 7.4306 12.7729 7.44935 13.0768 7.75322C13.3808 8.0571 13.3995 8.53767 13.1336 8.8637L13.0768 8.92686L9.75681 12.2469C9.45295 12.5508 8.97238 12.5696 8.64644 12.3036L8.58319 12.2469L6.92317 10.5869L6.86643 10.5237C6.60054 10.1977 6.61929 9.7171 6.92317 9.41324C7.22704 9.10938 7.70762 9.09062 8.03362 9.35647L8.09684 9.41324L9.17 10.4863L11.9032 7.75322L11.9664 7.69649Z" fill="#171A1F" />
              </svg>
            </div>
            <div className="menu-item-info">
              <span className="menu-item-title">Security</span>
              <span className="menu-item-subtitle">2FA, Password</span>
            </div>
            <div className="arrow-icon">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M6.92315 4.4334C7.22703 4.12952 7.7076 4.11077 8.0336 4.37666L8.09683 4.4334L13.0768 9.41342C13.4009 9.73753 13.4009 10.2629 13.0768 10.587L8.09683 15.567C7.77269 15.8912 7.24729 15.8912 6.92315 15.567C6.59902 15.2429 6.59902 14.7175 6.92315 14.3934L11.3163 10.0002L6.92315 5.60707L6.86641 5.54385C6.60052 5.21785 6.61928 4.73727 6.92315 4.4334Z" fill="#171A1F" />
              </svg>
            </div>
          </button>

          <button className="menu-item" onClick={handleHelpSupport}>
            <div className="menu-item-icon">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0_0_1488)">
                  <path d="M17.47 10.0001C17.47 5.87455 14.1256 2.53012 10 2.53012C5.87443 2.53012 2.53 5.87455 2.53 10.0001C2.53 14.1257 5.87443 17.4701 10 17.4701C14.1256 17.4701 17.47 14.1257 17.47 10.0001ZM19.13 10.0001C19.13 15.0424 15.0423 19.1301 10 19.1301C4.95764 19.1301 0.869999 15.0424 0.869999 10.0001C0.869999 4.95776 4.95764 0.870117 10 0.870117C15.0423 0.870117 19.13 4.95776 19.13 10.0001Z" fill="#171A1F" />
                  <path d="M8.25178 5.46419C8.92764 5.06705 9.72195 4.92161 10.4946 5.05405C11.2672 5.18659 11.9682 5.58834 12.4731 6.18801C12.9779 6.7876 13.2546 7.54656 13.2537 8.33028L13.2431 8.56293C13.1373 9.70384 12.2697 10.4679 11.6391 10.8883C11.2776 11.1293 10.9219 11.3061 10.6599 11.4225C10.5277 11.4813 10.4159 11.5257 10.3357 11.5562C10.2956 11.5715 10.2629 11.5835 10.2392 11.5919C10.2275 11.5961 10.2181 11.6 10.2109 11.6025C10.2073 11.6037 10.2043 11.6049 10.2019 11.6057L10.1987 11.6065L10.1971 11.6074H10.1963L10.1145 11.63C9.70386 11.7222 9.28172 11.4898 9.14585 11.0821C9.00134 10.6478 9.23565 10.1779 9.66941 10.0324V10.0333L9.67107 10.0324C9.67323 10.0317 9.67738 10.0304 9.68319 10.0284C9.69589 10.0239 9.71705 10.0163 9.74477 10.0057C9.8008 9.98438 9.8843 9.95093 9.98556 9.90595C10.1904 9.81498 10.4574 9.6811 10.7183 9.50722C11.2905 9.12575 11.5935 8.71955 11.5937 8.33028V8.32867L11.5872 8.18277C11.5577 7.8433 11.4247 7.51962 11.2038 7.25712C10.9513 6.95722 10.6005 6.75602 10.2141 6.68974C9.82777 6.62352 9.4302 6.69621 9.09231 6.89481C8.75442 7.09339 8.49778 7.40538 8.36772 7.77506L8.33527 7.85368C8.15634 8.23452 7.71458 8.42589 7.30911 8.28327C6.87677 8.13117 6.64972 7.65706 6.80171 7.2247L6.85359 7.0869C7.12689 6.40764 7.61817 5.83657 8.25178 5.46419Z" fill="#171A1F" />
                  <path d="M10.0081 13.3403L10.0932 13.3444C10.5117 13.3869 10.8381 13.7406 10.8381 14.1703C10.8381 14.6001 10.5117 14.9538 10.0932 14.9963L10.0081 15.0003H10C9.54159 15.0003 9.17 14.6287 9.17 14.1703C9.17 13.7119 9.54159 13.3403 10 13.3403H10.0081Z" fill="#171A1F" />
                </g>
                <defs>
                  <clipPath id="clip0_0_1488">
                    <rect width="20" height="20" fill="white" />
                  </clipPath>
                </defs>
              </svg>
            </div>
            <div className="menu-item-info">
              <span className="menu-item-title">Help & Support</span>
              <span className="menu-item-subtitle">FAQ, Contact</span>
            </div>
            <div className="arrow-icon">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M6.92315 4.4334C7.22703 4.12952 7.7076 4.11077 8.0336 4.37666L8.09683 4.4334L13.0768 9.41342C13.4009 9.73753 13.4009 10.2629 13.0768 10.587L8.09683 15.567C7.77269 15.8912 7.24729 15.8912 6.92315 15.567C6.59902 15.2429 6.59902 14.7175 6.92315 14.3934L11.3163 10.0002L6.92315 5.60707L6.86641 5.54385C6.60052 5.21785 6.61928 4.73727 6.92315 4.4334Z" fill="#171A1F" />
              </svg>
            </div>
          </button>
        </div>

        {/* Log Out */}
        <button className="menu-logout-btn" onClick={handleLogout}>
          <div className="logout-icon">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M1.67 15.8099L1.67 4.18986C1.67 3.73147 2.04161 3.35986 2.5 3.35986C2.95839 3.35986 3.33 3.73147 3.33 4.18986L3.33 15.8099C3.33 16.2683 2.95839 16.6399 2.5 16.6399C2.04161 16.6399 1.67 16.2683 1.67 15.8099Z" fill="#565E6D"/>
<path d="M17.48 9.16992C17.9384 9.16992 18.31 9.54151 18.31 9.99992C18.31 10.4583 17.9384 10.8299 17.48 10.8299L5.86 10.8299C5.40161 10.8299 5.03 10.4583 5.03 9.99992C5.03 9.54151 5.40161 9.16992 5.86 9.16992L17.48 9.16992Z" fill="#565E6D"/>
<path d="M11.9232 4.43291C12.2271 4.12903 12.7076 4.11028 13.0336 4.37617L13.0968 4.43291L18.0768 9.41293C18.4009 9.73704 18.4009 10.2624 18.0768 10.5865L13.0968 15.5665C12.7727 15.8907 12.2473 15.8907 11.9232 15.5665C11.599 15.2424 11.599 14.717 11.9232 14.3929L16.3163 9.99974L11.9232 5.60658L11.8664 5.54336C11.6005 5.21736 11.6192 4.73678 11.9232 4.43291Z" fill="#565E6D"/>
</svg>
          </div>
          Log Out
        </button>

        {/* App Version */}
        <p className="menu-version">App Version 11.0 • Build 2026.01.15</p>
      </div>
    </div>
  );
};

export default MenuScreen;
